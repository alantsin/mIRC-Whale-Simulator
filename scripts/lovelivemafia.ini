[script]
n0=on *:load:{
n1=  set %mafiaChannel #umidah
n2=  set %mafiaAdmin umidah
n3=  set %mafiaRunning $false
n4=  set %mafiaJoinTime $false
n5=  set %mafiaRegPlayers
n6=  set %mafiaPlayers
n7=  set %mafiaStartMessage $false
n8=  set %mafiaTimer $false
n9=  set %mafiaNumNight 0
n10=  set %rinNyaavigate
n11=  set %kotoriFollow
n12=  set %eliAssign
n13=  set %makiHelp
n14=  set %umiShoot
n15=  set %hanayoInspect
n16=  set %nicoNi1
n17=  set %nicoNi2
n18=  set %nozomiWashi
n19=}
n20=
n21=// start game
n22=on *:TEXT:!startmafia:%mafiaChannel:{
n23=  if ($nick != %mafiaAdmin) {
n24=    msg %mafiaChannel [Idol Mafia] Only %mafiaAdmin can start a game
n25=  }
n26=  else if (%mafiaRunning == $true) {
n27=    scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $nick [Idol Mafia] A game is already running.
n28=  }
n29=  else {
n30=    startMafiaGame
n31=  }
n32=}
n33=
n34=// alias to reset all values for new game
n35=alias resetValues {
n36=  set %mafiaRunning $false
n37=  set %mafiaJoinTime $false
n38=  unset %mafiaRegPlayers
n39=  unset %mafiaPlayers
n40=  set %mafiaStartMessage $false
n41=  set %mafiaTimer $false
n42=  set %mafiaNumNight 0
n43=  set %nightAction $false
n44=  unset %honoka
n45=  unset %rin
n46=  unset %kotori
n47=  unset %eli
n48=  unset %maki
n49=  unset %umi
n50=  unset %hanayo
n51=  unset %nico
n52=  unset %nozomi
n53=  unset %rinAction
n54=  unset %umiAction
n55=  unset %nicoAction
n56=  unset %rinNyaavigate
n57=  unset %kotoriFollow
n58=  unset %eliAssign
n59=  unset %makiHelp
n60=  unset %umiShoot
n61=  unset %hanayoInspect
n62=  unset %nicoNi1
n63=  unset %nicoNi2
n64=  unset %nozomiWashi
n65=  unset %presidentName
n66=}
n67=
n68=on *:TEXT:!endmafia:%mafiaChannel:{
n69=  if ($nick != %mafiaAdmin) {
n70=    msg %mafiaChannel [Idol Mafia] Only %mafiaAdmin can end the game early.
n71=  }
n72=  else {
n73=    resetValues
n74=    msg %mafiaChannel [Idol Mafia] Game ended by Admin.
n75=  }
n76=}
n77=
n78=on *:TEXT:!join:%mafiaChannel:{
n79=  if (%mafiaJoinTime == $false) {
n80=    return
n81=  }
n82=  addPlayer $nick
n83=  checkToStart
n84=}
n85=
n86=on *:TEXT:!part:%mafiaChannel:{
n87=  if (%mafiaJoinTime == $false) {
n88=    return
n89=  }
n90=  else if (!$istok(%mafiaRegPlayers, $nick, 44)) {
n91=    return
n92=  }
n93=  delPlayer $nick
n94=}
n95=
n96=// alias to join game
n97=alias addPlayer {
n98=  if ($istok(%mafiaRegPlayers, $1, 44)) {
n99=    scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] You have already joined the game!
n100=  }
n101=  else if ($numtok(%mafiaRegPlayers, 44) > 9) {
n102=    return
n103=  }
n104=  else {
n105=    set %mafiaRegPlayers $addtok(%mafiaRegPlayers, $1, 44)
n106=    scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] You have joined as player $numtok(%mafiaRegPlayers, 44)
n107=    checkToStart
n108=  }
n109=}
n110=
n111=// alias to leave game
n112=alias delPlayer {
n113=  set %mafiaRegPlayers $remtok(%mafiaRegPlayers, $1, 1, 44)
n114=  scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] You have left the game.
n115=  checkToStart
n116=}
n117=
n118=
n119=// alias to start game
n120=
n121=alias startMafiaGame {
n122=  set %mafiaRunning $true
n123=  set %mafiaJoinTime $true
n124=  msg %mafiaChannel [Idol Mafia] A new game has started! Type "!join" in the chat to join.
n125=  checkToStart
n126=}
n127=
n128=//alias to check for more than 5 players
n129=
n130=alias checkToStart {
n131=  if ($numtok(%mafiaRegPlayers, 44) < 5) {
n132=    set %mafiaTimer $false
n133=  }
n134=  else if (%mafiaTimer == $true) {
n135=    return
n136=  }
n137=  else {
n138=    if (%mafiaStartMessage == $false) {
n139=      msg %mafiaChannel [Idol Mafia] 5 or more players have joined. The game will start in 10 seconds...
n140=      set %mafiaStartMessage == $true
n141=      set %mafiaTimer $true
n142=      timer1 1 10 startGame
n143=    }
n144=  }
n145=}
n146=
n147=// alias to really start game
n148=
n149=alias startGame {
n150=  set %mafiaJoinTime $false
n151=  msg %mafiaChannel [Idol Mafia] $numtok(%mafiaRegPlayers, 44) have joined total.
n152=  set %mafiaPlayers %mafiaRegPlayers
n153=  role $numtok(%mafiaRegPlayers, 44)
n154=  msg %mafiaChannel [Idol Mafia] Your roles will be whispered to you shortly, keep it a secret! The game will begin in 15 seconds...
n155=  timer 1 15 night
n156=}
n157=
n158=// alias to assign roles
n159=
n160=alias role { 
n161=  var %i = 1
n162=
n163=  while ($1 >= %i) {
n164=    var %rand = $rand(1, $numtok(%mafiaRegPlayers, 44))
n165=
n166=    if (%i == 1) {
n167=      set %honoka $gettok(%mafiaRegPlayers, %rand, 44)
n168=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %honoka, 1, 44)
n169=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %honoka [Idol Mafia] Hello, Honoka, you are the Idol Leader! You're lazy so you don't do anything at night. You can whisper to me "!elect <username>" without the <> during the daytime. Your "!vote" will also determine the result of a tie.
n170=    }
n171=
n172=    else if (%i == 2) {
n173=      set %rin $gettok(%mafiaRegPlayers, %rand, 44)
n174=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %rin, 1, 44)
n175=      set %rinAction $true
n176=      scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] Hello, Rin, you are the Neko Idol! You can use whisper to me "!nyaavigate" once per game. Otherwise, whisper to me "!idle" each night if you don't want to use it.
n177=    }
n178=
n179=    else if (%i == 3) {
n180=      set %kotori $gettok(%mafiaRegPlayers, %rand, 44)
n181=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %kotori, 1, 44)
n182=      set %copName Kotori
n183=      scid -at1 timer 1 3 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] Hello, Kotori, you are the Cop! You can use whisper to me "!follow <username>" without the <> once per night.
n184=    }
n185=
n186=    else if (%i == 4) {
n187=      set %eli $gettok(%mafiaRegPlayers, %rand, 44)
n188=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %eli, 1, 44)
n189=      set %presidentName Eli
n190=      scid -at1 timer 1 4 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] Hello, Eli, you are the Student Council President! You can whisper to me "!assign <username>" without the <> once per night. Otherwise, whisper to me "!idle" if you don't want to assign any homework that night.
n191=    }
n192=
n193=    else if (%i == 5) {
n194=      set %maki $gettok(%mafiaRegPlayers, %rand, 44)
n195=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %maki, 1, 44)
n196=      scid -at1 timer 1 5 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] Hello, Maki, you are the Tutor Doctor! You can whisper to me "!help <username>" without the <> once per night.
n197=    }
n198=
n199=    else if (%i == 6) {
n200=      set %umi $gettok(%mafiaRegPlayers, %rand, 44)
n201=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %umi, 1, 44)
n202=      set %umiAction $true
n203=      scid -at1 timer 1 6 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] Hello, Umi, you are the Student Council Archer! You can whisper to me "!shoot <username>" without the <> once per game. Otherwise, whisper to me "!idle" each night if you don't want to use it.
n204=      scid -at1 timer 1 7 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] %umi is Umi, the Student Council Archer you hired. Umi doesn't know you are the Student Council President, so how you use this knowledge is up to you.
n205=    }
n206=
n207=    else if (%i == 7) {
n208=      set %hanayo $gettok(%mafiaRegPlayers, %rand, 44)
n209=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %hanayo, 1, 44)
n210=      scid -at1 timer 1 8 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] Hello, Hanayo, the Detective! You can whisper to me "!inspect <username>" without the <> once per night.
n211=      scid -at1 timer 1 9 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] %hanayo is Hanayo, the Detective that you hired. Hanayo doesn't know you are the Cop, so how you use this knowledge is up to you.
n212=    }
n213=
n214=    else if (%i == 8) {
n215=      set %nico $gettok(%mafiaRegPlayers, %rand, 44)
n216=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %nico, 1, 44)
n217=      set %nicoAction $true
n218=      scid -at1 timer 1 10 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] Hello, Nico, you are the Universe's Number 1 Idol! You can whisper to me "!niconi <username> <target>" without the <> once per game. <username> is who you want to take control of, <target> is who their action will be applied to.  Otherwise, whisper to me "!idle" each night if you don't want to use it.
n219=    }
n220=
n221=    else if (%i == 9) {
n222=      set %nozomi $gettok(%mafiaRegPlayers, %rand, 44)
n223=      set %mafiaRegPlayers $remtok(%mafiaRegPlayers, %nozomi, 1, 44)
n224=      scid -at1 timer 1 11 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] Hello, Nozomi! You can whisper to me "!washi <username> once per night.
n225=      scid -at1 timer 1 12 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] %nozomi is Nozomi, the Student Council Vice President. Nozomi doesn't know you are the Student Council President, so how you use this knowledge is up to you.
n226=    }
n227=
n228=    inc %i
n229=  }
n230=}
n231=
n232=// alias for what happpens at night
n233=alias night {
n234=  inc %mafiaNumNight
n235=  unset %rinNyaavigate
n236=  unset %kotoriFollow
n237=  unset %eliAssign
n238=  unset %makiHelp
n239=  unset %umiShoot
n240=  unset %hanayoInspect
n241=  unset %nicoNi1
n242=  unset %nicoNi2
n243=  unset %nozomiWashi
n244=  scid -at1 msg %mafiaChannel [Idol Mafia] Welcome to the $ord(%mafiaNumNight) night of Idol Mafia. Whisper to me your action for the night. When everyone has done so, it will be morning.
n245=  set %dayVoting $false
n246=  set %nightAction $true
n247=  set %mafiaPlayersMoved %mafiaPlayers
n248=  if ($istok(%mafiaPlayersMoved, %honoka, 44)) {
n249=    var %rand = $rand(1,30)
n250=    timer 1 %rand removeHonoka
n251=  }
n252=}
n253=
n254=// alias to remove Honoka from players moved
n255=alias removeHonoka {
n256=  %mafiaPlayersMoved = $remtok(%mafiaPlayersMoved, %honoka, 44))
n257=  checkAllDone
n258=}
n259=
n260=// alias to check if all players are done their action
n261=alias checkAllDone {
n262=  if (%mafiaPlayersMoved != $null) {
n263=    return
n264=  }
n265=  else {
n266=    set %nightAction $false
n267=    set %dayVoting $true
n268=    nextDay
n269=  }
n270=}
n271=
n272=// alias for what happens during the day.
n273=alias nextDay {
n274=  scid -at1 msg %mafiaChannel [Idol Mafia] It is now daytime!
n275=  if (%nico != $null) {
n276=    nicoNicoNi
n277=  }
n278=  mafiaEliResult
n279=}
n280=
n281=// alias for nicoNicoNi
n282=alias nicoNicoNi {
n283=  if (%nozomi != $null) {
n284=    if (%nozomiWashi == %nico) {
n285=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi tried to Washi Washi Nico $+ , but she was too flat!
n286=    }
n287=  }
n288=  if (%nicoAction) {
n289=    if (%nicoNi1 == %honoka) {
n290=      set %nicoHonoka $true
n291=    }
n292=    else if (%nicoNi1 == %rin) {
n293=      set %nicoRin $true
n294=    }
n295=    else if (%nicoNi1 == %kotori) {
n296=      set %kotoriFollow %nicoNi2
n297=      scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] But Nico seduced you into following %nicoNi2 instead!
n298=    }
n299=    else if (%nicoNi1 == %eli) {
n300=      set %eliAssign %nicoNi2
n301=      scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] But Nico seduced you into assigning %nicoNi2 homework instead!
n302=    }
n303=    else if (%nicoNi1 == %maki) {
n304=      set %makiHelp %nicoNi2
n305=      scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] But Nico seduced you into helping %nicoNi2 instead!
n306=    }
n307=    else if (%nicoNi1 == %umi) {
n308=      set %umiShoot %nicoNi2
n309=    }
n310=    else if (%nicoNi1 == %hanayo) {
n311=      set %hanayoInspect %nicoNi2
n312=      scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] But Nico seduced you into following %nicoNi2 instead!
n313=    }
n314=    else if (%nicoNi1 == %nozomi) {
n315=      set %nozomiWashi %nicoNi2
n316=      scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] But Nico seduced you into rubbing %nicoNi2 instead!
n317=    }
n318=    set %nicoAction $false
n319=  }
n320=}
n321=
n322=// alias for Eli's result
n323=alias mafiaEliResult {
n324=  if (%rinNyaavigate) {
n325=    set rinAction $false
n326=  }
n327=  if (%nozomi != $null) {
n328=    if (%nozomiWashi == %eli) {
n329=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with %presidentName $+ .
n330=      timer 1 2 checkEndGameCouncil
n331=    }
n332=  }
n333=  else {
n334=    if (%eliAssign == %honoka) {
n335=      if (%makiHelp == %honoka) {
n336=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %honoka $+ , but Maki was there to help!
n337=      }
n338=      else {
n339=        %mafiaPlayers = $remtok(%mafiaPlayers, %honoka, 44)
n340=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %honoka $+ . She will work on it for the rest of the game!
n341=        unset %honoka
n342=      }
n343=    }
n344=    else if (%eliAssign == %rin) {
n345=      if (%rinNyaavigate) {
n346=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework, but all she found was a cat!
n347=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %eli tried to assign you homework, but found a cat in your place!
n348=      }
n349=      else if (%makiHelp == %rin) {
n350=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %rin $+ , but Maki was there to help!
n351=      }
n352=      else {
n353=        mafiaPlayers = $remtok(%mafiaPlayers, %rin, 44)
n354=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %rin $+ . She will work on it for the rest of the game!
n355=        unset %rin
n356=      }
n357=    }
n358=    else if (%eliAssign == %kotori) {
n359=      if (%makiHelp == %kotori) {
n360=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %kotori $+ , but Maki was there to help!
n361=      }
n362=      else {
n363=        %mafiaPlayers = $remtok(%mafiaPlayers, %kotori, 44)
n364=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %kotori $+ . She will work on it for the rest of the game!
n365=        newCop
n366=      }
n367=    }
n368=    else if (%eliAssign == %maki) {
n369=      if (%kotoriFollow == %maki) {
n370=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to Maki $+ , but %copName intervened!
n371=      }
n372=      else {
n373=        %mafiaPlayers = $remtok(%mafiaPlayers, %maki, 44)
n374=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %maki $+ . She will work on it for the rest of the game!
n375=        unset %maki
n376=      }
n377=    }
n378=    else if (%eliAssign == %umi) {
n379=      if (%makiHelp == %umi) {
n380=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %umi $+ , but Maki was there to help!
n381=      }
n382=      else {
n383=        %mafiaPlayers = $remtok(%mafiaPlayers, %umi, 44)
n384=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %umi $+ . She will work on it for the rest of the game!
n385=        unset %umi
n386=      }
n387=    }
n388=    else if (%eliAssign == %hanayo) {
n389=      if (%makiHelp == %hanayo) {
n390=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %hanayo $+ , but Maki was there to help!
n391=      }
n392=      else {
n393=        %mafiaPlayers = $remtok(%mafiaPlayers, %hanayo, 44)
n394=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %hanayo $+ . She will work on it for the rest of the game!
n395=        unset %hanayo
n396=      }
n397=    }
n398=    else if (%eliAssign == %nico) {
n399=      if ((%nicoRin) && (%nicoNi2 == %eli)) {
n400=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to Nico, but all she found was a cat!
n401=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] %eli tried to assign you homework, but found a cat in your place!
n402=        set %nicoRin $false
n403=      }
n404=      else if (%makiHelp == %nico) {
n405=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %nico $+ , but Maki was there to help!
n406=      }
n407=      else {
n408=        %mafiaPlayers = $remtok(%mafiaPlayers, %nico, 44)
n409=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %nico $+ . She will work on it for the rest of the game!
n410=        unset %nico
n411=      }
n412=    }
n413=    else if (%eliAssign == %nozomi) {
n414=      if (%makiHelp == %nozomi) {
n415=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %nozomi $+ , but Maki was there to help!
n416=      }
n417=      else {
n418=        %mafiaPlayers = $remtok(%mafiaPlayers, %nico, 44)
n419=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to %nozomi $+ . She will work on it for the rest of the game!
n420=        unset %nozomi
n421=      }
n422=    }
n423=    else if (%eliAssign == Idle) {
n424=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %presidentName assigned homework to...nobody!
n425=    }
n426=    else {
n427=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Something went wrong.
n428=    }
n429=    timer 1 2 checkEndGameCouncil
n430=  }
n431=}
n432=
n433=// alias for Kotori's result
n434=alias mafiaKotoriResult {
n435=  if (%kotori != $null) {
n436=    if (%nozomi != $null) {
n437=      if (%nozomiWashi == %kotori) {
n438=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with %copName $+ .
n439=      }
n440=    }
n441=    else if (%kotoriFollow == %eliAssign) {
n442=      arrestEli
n443=      return
n444=    }
n445=    else if (%umi != $null) {
n446=      if (%kotoriFollow == %umiShoot) {
n447=        arrest Umi
n448=        return
n449=      }
n450=      else if ((%kotoriFollow == %rin) || (%rinNyaavigate)) {
n451=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %copName was following someone, but all she found was a cat!
n452=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %kotori tried to follow you tonight, but found a cat in your place!
n453=      }
n454=      else {
n455=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %copName was too busy following %kotoriFollow tonight.
n456=      }
n457=    } 
n458=  }
n459=  dayVoting
n460=}
n461=
n462=// alias for Umi's result
n463=alias mafiaUmiResult {
n464=  if (%nozomi != $null) {
n465=    if (%umi != $null) {
n466=      if (%nozomiWashi == %umi) {
n467=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with Umi $+ .
n468=        timer 1 2 mafiaKotoriResult
n469=      }
n470=    }
n471=  }
n472=  else {
n473=    if (%umi != $null) {
n474=      if (%umiShoot != $null)  {
n475=        set %umiAction $false
n476=        if (%umiShoot == %honoka) {
n477=          if (%makiHelp == %honoka) {
n478=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %honoka $+ , but Maki was there to help!
n479=          }
n480=          else {
n481=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %honoka $+ . %honoka is immobilized with love for doing homework and will work on it for the rest of the game!
n482=            %mafiaPlayers = $remtok(%mafiaPlayers, %honoka, 44)
n483=            unset %honoka
n484=          }
n485=        }
n486=        else if (%umiShoot == %rin) {
n487=          if (%rinNyaavigate) {
n488=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot Rin $+ , but all she found was a cat!
n489=            scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %umi tried to Love Arrow Shoot you, but found a cat in your place!
n490=          }
n491=          else if (%makiHelp == %rin) {
n492=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %rin $+ , but Maki was there to help!
n493=          }
n494=          else {
n495=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %rin $+ . %rin is immobilized with love for doing homework and will work on it for the rest of the game!
n496=            %mafiaPlayers = $remtok(%mafiaPlayers, %rin, 44)
n497=            unset %rin
n498=          }
n499=        }
n500=        else if (%umiShoot == %kotori) {
n501=          if (%makiHelp == %kotori) {
n502=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %kotori $+ , but Maki was there to help!
n503=          }
n504=          else {
n505=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %kotori $+ . %kotori is immobilized with love for doing homework and will work on it for the rest of the game!
n506=            %mafiaPlayers = $remtok(%mafiaPlayers, %kotori, 44)
n507=            newCop
n508=          }
n509=        }
n510=        else if (%umiShoot == %eli) {
n511=          if (%makiHelp == %eli) {
n512=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %eli $+ , but Maki was there to help!
n513=            arrestUmi
n514=          }
n515=          else {
n516=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %eli $+ . %eli is immobilized with love for doing homework and will work on it for the rest of the game!
n517=            %mafiaPlayers = $remtok(%mafiaPlayers, %eli, 44)
n518=            newPresident
n519=          }
n520=        }
n521=        else if (%umiShoot == %maki) {
n522=          if (%kotoriFollow == %maki) {
n523=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot Maki $+ , but %copName intervened!
n524=            arrestUmi
n525=          }
n526=          else {
n527=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %maki $+ . %maki is immobilized with love for doing homework and will work on it for the rest of the game!
n528=            %mafiaPlayers = $remtok(%mafiaPlayers, %maki, 44)
n529=            unset %maki
n530=          }
n531=        }
n532=        else if (%umiShoot == %hanayo) {
n533=          if (%makiHelp == %hanayo) {
n534=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %hanayo $+ , but Maki was there to help!
n535=          }
n536=          else {
n537=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %hanayo $+ . %hanayo is immobilized with love for doing homework and will work on it for the rest of the game!
n538=            %mafiaPlayers = $remtok(%mafiaPlayers, %hanayo, 44)
n539=            unset %hanayo
n540=          }
n541=        }
n542=        else if (%umiShoot == %nico) {
n543=          if ((%nicoRin) && (%nicoNi2 == %umi)) {
n544=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot Nico $+ , but all she found was a cat!
n545=            scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] %umi tried to Love Arrow Shoot you, but found a cat in your place!
n546=            set %nicoRin $false
n547=          }
n548=          else if (%makiHelp == %nico) {
n549=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %rin $+ , but Maki was there to help!
n550=          }
n551=          else {
n552=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %nico $+ . %nico is immobilized with love for doing homework and will work on it for the rest of the game!
n553=            %mafiaPlayers = $remtok(%mafiaPlayers, %nico, 44)
n554=            unset %rin
n555=          }
n556=        }
n557=        else if (%umiShoot == %nozomi) {
n558=          if (%makiHelp == %nozomi) {
n559=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi tried to Love Arrow Shoot %nozomi $+ , but Maki was there to help!
n560=          }
n561=          else {
n562=            scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Umi used her Love Arrow Shoot on %nozomi $+ . %nozomi is immobilized with love for doing homework and will work on it for the rest of the game!
n563=            %mafiaPlayers = $remtok(%mafiaPlayers, %hanayo, 44)
n564=            unset %hanayo
n565=          }
n566=        }
n567=      }
n568=    }
n569=  }
n570=  mafiaKotoriResult
n571=}
n572=
n573=// alias to check if Student Council team won
n574=alias checkEndGameCouncil {
n575=  if (%honoka != $null) {
n576=    mafiaUmiResult
n577=  }
n578=  else if (%rin != $null) {
n579=    mafiaUmiResult
n580=  }
n581=  else if (%kotori != $null) {
n582=    mafiaUmiResult
n583=  }
n584=  else if (%maki != $null) {
n585=    mafiaUmiResult
n586=  }
n587=  else if (%hanayo != $null) {
n588=    mafiaUmiResult
n589=  }
n590=  else if (%nico != $null) {
n591=    mafiaUmiResult
n592=  }
n593=  else {
n594=    endGameCouncil
n595=  }
n596=}
n597=
n598=// alias to end game and declare Idol Team the winners
n599=alias endGameCouncil {
n600=  scid -at1 timer 1 3 msg %mafiaChannel [Idol Mafia] The game is over! Team Student Council wins! The winners are: %mafiaPlayers
n601=  resetValues
n602=}
n603=
n604=// alias for Day Voting
n605=alias dayVoting {
n606=  otherResults
n607=  set %dayVoting $true
n608=  set %voteYes 0
n609=  set %voteNo 0
n610=  if (%honoka == $null) {
n611=    set %voteOn $true
n612=    set %mafiaPlayersVoted %mafiaPlayers
n613=    var %rand = $rand(1, $numtok(%mafiaPlayers, 44))
n614=    set %honokaDecision $gettok(%mafiaPlayers, %rand, 44)
n615=    scid -at1 timer 1 3 msg %mafiaChannel [Idol Mafia] Honoka is too busy with her own homework to elect! In the confusion, %honokaDecision was elected!
n616=    scid -at1 timer 1 4 msg %mafiaChannel [Idol Mafia] Type "!vote yes" or "!vote no" in the channel. You cannot change your vote, so pick wisely! %honokaDecision can persuade you in the meantime.
n617=  }
n618=  else {
n619=    if (%nozomi != $null) {
n620=      if (%nozomiWashi == %honoka) {
n621=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild day with Honoka $+ , so no voting will take place today.
n622=        timer 1 2 night
n623=      }
n624=    }
n625=    set %mafiaPlayersVoted %mafiaPlayers
n626=    scid -at1 timer 1 3 msg %mafiaChannel [Idol Mafia] It is now time for Honoka to elect who will do the daily homework.
n627=  }
n628=}
n629=
n630=// alias for other player's results
n631=
n632=alias otherResults {
n633=  if (%kotori != $null) {
n634=    if (%nozomi != $null) {
n635=      if (%nozomiWashi == %kotori) {
n636=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with %copName $+ .
n637=      }
n638=    }
n639=    else if (%kotoriFollow == %eliAssign) {
n640=      arrestEli
n641=    }
n642=    else if (%umi != $null) {
n643=      if (%kotoriFollow == %umiShoot) {
n644=        arrest Umi
n645=      }
n646=      else if ((%kotoriFollow == %rin) || (%rinNyaavigate)) {
n647=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %copName was following someone, but all she found was a cat!
n648=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %kotori tried to follow you tonight, but found a cat in your place!
n649=      }
n650=      else {
n651=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] %copName was too busy following %kotoriFollow tonight.
n652=      }
n653=    } 
n654=  }
n655=
n656=
n657=  if (%maki != $null) {
n658=    if ((%makiHelp != %eliAssign) || (%makiHelp != %umiShoot))  {
n659=      if (%nozomi != $null) {
n660=        if (%nozomiWashi == %maki) {
n661=          scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with Maki $+ .
n662=        }
n663=      }
n664=      if ((%makiHelp == %rin) && (%rinNyaavigate)) {
n665=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Maki was helping someone, but was distracted by a cat!
n666=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %maki tried to help you tonight, but found a cat in your place!
n667=      }
n668=      else {
n669=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Maki was too busy helping %makiHelp tonight.
n670=      }
n671=    }
n672=  }
n673=
n674=  if (%hanayo != $null) {
n675=    if (%nozomi != $null) {
n676=      if (%nozomiWashi == %nozomi) {
n677=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with Hanayo $+ .
n678=      }
n679=    }
n680=    else {
n681=      if (%hanayoInspect == %honoka) {
n682=        set %hanayoIdentity = Honoka
n683=      }
n684=      else if (%hanayoInspect == %rin) {
n685=        set %hanayoIdentity = Rin
n686=        if (%rinNyaavigate) {
n687=          scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %hanayo inspected you tonight, and found out that you are Rin!
n688=        }
n689=      }
n690=      else if (%hanayoInspect == %kotori) {
n691=        set %hanayoIdentity = Kotori
n692=      }
n693=      else if (%hanayoInspect == %eli) {
n694=        set %hanayoIdentity = %presidentName
n695=      }
n696=      else if (%hanayoInspect == %maki) {
n697=        set %hanayoIdentity = Maki
n698=      }
n699=      else if (%hanayoInspect == %umi) {
n700=        set %hanayoIdentity = Umi
n701=      }
n702=      else if (%hanayoInspect == %nico) {
n703=        set %hanayoIdentity = Nico
n704=      } 
n705=      else if (%hanayoInspect == %nozomi) {
n706=        set %hanayoIdentity = Nozomi
n707=      } 
n708=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] You investigated %hanayoInspect $+ and found out that they are %hanayoIdentity
n709=    }
n710=  }
n711=  if (%nozomi != $null) {
n712=    if (%nozomiWashi == %rin) {
n713=      if (%rinNyaavigate) {
n714=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi was looking for a good time with Rin, but all she found was a cat!
n715=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %nozomi tried to Washi Washi you tonight, but found a cat in your place!
n716=      }
n717=      else {
n718=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Nozomi had a wild night with Rin $+ .
n719=      }
n720=    }
n721=  }
n722=}
n723=
n724=on *:TEXT:!vote*:%mafiaChannel:{
n725=  if (%voteOn) {
n726=    if ($istok(%mafiaPlayersVoted, $nick, 44)) {
n727=      if ($2 == yes) {
n728=        inc %voteYes
n729=        if ($nick == %honoka) {
n730=          set %honokaVote $true
n731=        }
n732=        %mafiaPlayersVoted = $remtok(%mafiaPlayersVoted, $nick, 44)
n733=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w $nick [Idol Mafia] You have voted $2 for %honokaDecision to do the homework.
n734=        checkAllVoted
n735=      }
n736=      else if ($2 == no) {
n737=        inc %voteNo
n738=        if ($nick == %honoka) {
n739=          set %honokaVote $false
n740=        }
n741=        %mafiaPlayersVoted = $remtok(%mafiaPlayersVoted, $nick, 44)
n742=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w $nick [Idol Mafia] You have voted $2 for %honokaDecision to do the homework.
n743=        checkAllVoted
n744=      }
n745=    }
n746=    else {
n747=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w $nick [Idol Mafia] Only active players can participate in voting.
n748=    }
n749=  }
n750=}
n751=
n752=// alias for checking if everyone has voted
n753=alias checkAllVoted {
n754=  if ($calc(%voteYes / $numtok(%mafiaPlayers, 44)) > 0.5) {
n755=    dayVotingResults
n756=  }
n757=  else if ($calc(%voteNo / $numtok(%mafiaPlayers, 44)) > 0.5)) {
n758=    dayVotingResults
n759=  }
n760=  else if (%mafiaPlayersVoted != $null) {
n761=    return
n762=  }
n763=  else {
n764=    dayVotingResults
n765=  }
n766=}
n767=
n768=// alias to announce results of vote
n769=alias dayVotingResults {
n770=  if (%voteYes == %voteNo) {
n771=    if (%honokaVote) {
n772=      %mafiaPlayers = $remtok(%mafiaPlayers, %honokaDecision, 44)
n773=      if (%honokaDecision == %rin) {
n774=        if (%rinNyaavigate) {
n775=          scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Honoka decided to assign %rin the daily homework, but all she found was a cat!
n776=          if (%honoka != $null) {
n777=            scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %honoka tried to elect you to do the daily homework, but found a cat in your place!
n778=          }
n779=        }
n780=        else {
n781=          %mafiaPlayers = $remtok(%mafiaPlayers, %rin, 44)
n782=          unset %rin
n783=          scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Honoka decided to assign %rin the daily homework. She will work on it for the rest of the game!
n784=        }
n785=        timer 1 2 night
n786=      }
n787=      else if (%honokaDecision == %kotori) {
n788=        %mafiaPlayers = $remtok(%mafiaPlayers, %kotori, 44)
n789=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Honoka decided to assign %kotori the daily homework. She will work on it for the rest of the game!
n790=        timer 1 2 newCop
n791=        timer 1 3 night
n792=      }
n793=      else if (%honokaDecision == %eli) {
n794=        %mafiaPlayers = $remtok(%mafiaPlayers, %eli, 44)
n795=        unset %eli
n796=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Honoka decided to assign %eli the daily homework. She will work on it for the rest of the game!
n797=        timer 1 2 newPresident
n798=        timer 1 3 checkEndGameIdol
n799=      }
n800=      else if (%honokaDecision == %maki) {
n801=        %mafiaPlayers = $remtok(%mafiaPlayers, %maki, 44)
n802=        unset %maki
n803=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Honoka decided to assign %maki the daily homework. She will work on it for the rest of the game!
n804=        timer 1 2 night
n805=      }
n806=    }
n807=    else {
n808=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] Honoka decided not to assign anyone the daily homework in the end.
n809=      timer 1 2 night
n810=    }
n811=  }
n812=  else if (%voteYes > %voteNo) {
n813=    %mafiaPlayers = $remtok(%mafiaPlayers, %honokaDecision, 44)
n814=    if (%honokaDecision == %rin) {
n815=      if (%rinNyaavigate) {
n816=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] The majority decided to assign %rin the daily homework, but all she found was a cat!
n817=        if (%honoka != $null) {
n818=          scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] %honoka tried to elect you to do the daily homework, but found a cat in your place!
n819=        }
n820=      }
n821=      else {
n822=        %mafiaPlayers = $remtok(%mafiaPlayers, %rin, 44)
n823=        scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] The majority decided to assign %rin the daily homework. She will work on it for the rest of the game!
n824=        unset %rin
n825=      }
n826=      timer 1 2 night
n827=    }
n828=    else if (%honokaDecision == %kotori) {
n829=      %mafiaPlayers = $remtok(%mafiaPlayers, %kotori, 44)
n830=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] The majority decided to assign %kotori the daily homework. She will work on it for the rest of the game!
n831=      unset %kotori
n832=      timer 1 2 night
n833=    }
n834=    else if (%honokaDecision == %eli) {
n835=      %mafiaPlayers = $remtok(%mafiaPlayers, %eli, 44)
n836=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] The majority decided to assign %eli the daily homework. She will work on it for the rest of the game!
n837=      unset %eli
n838=      timer 1 2 newPresident
n839=      timer 1 3 checkEndGameIdol
n840=    }
n841=    else if (%honokaDecision == %maki) {
n842=      %mafiaPlayers = $remtok(%mafiaPlayers, %maki, 44)
n843=      scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] The majority decided to assign %maki the daily homework. She will work on it for the rest of the game!
n844=      unset %maki
n845=      timer 1 2 night
n846=    }
n847=  }
n848=  else {
n849=    scid -at1 timer 1 1 msg %mafiaChannel [Idol Mafia] The majority decided against assigning %honokaDecision the daily homework.
n850=    timer 1 2 night
n851=  }
n852=}
n853=
n854=// alias to arrest Eli
n855=alias arrestEli {
n856=  %mafiaPlayers = $remtok(%mafiaPlayers, %eli, 44)
n857=  scid -at1 timer 1 3 msg %mafiaChannel [Idol Mafia] %copName was able to guilt %presidentName into doing the homework herself. She will work on it for the rest of the game!
n858=  newPresident
n859=  checkEndGameIdol
n860=}
n861=
n862=// alias to arrest Umi
n863=alias arrestUmi {
n864=  %mafiaPlayers = $remtok(%mafiaPlayers, %umi, 44)
n865=  scid -at1 timer 1 3 msg %mafiaChannel [Idol Mafia] %copName was able to guilt Umi into doing the homework herself. She will work on it for the rest of the game!
n866=  checkEndGameIdol
n867=}
n868=
n869=// alias to assign new President 
n870=alias newPresident {
n871=  if (%umiShoot == %eli) {
n872=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] You shot Eli, removing her from the game. Therefore, you are now the new student council president!
n873=    set %eli %umi
n874=    set %presidentName Umi
n875=    unset %umi
n876=  }
n877=  else if (%nozomi != $null) {
n878=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] %presidentName is out of the game! As vice president, you are now the new student council president!
n879=    set %eli %nozomi
n880=    set %presidentName Nozomi
n881=    unset %nozomi
n882=  }
n883=  else if (%umi != $null) {
n884=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] %presidentName is out of the game! As you are the only remaining member of the student council, you are now the new student council president!
n885=    set %eli %umi
n886=    set %presidentName Umi
n887=    unset %umi
n888=  }
n889=  else {
n890=    unset %eli
n891=  }
n892=}
n893=
n894=// alias to assign new Cop
n895=alias newCop {
n896=  if (%hanayo != $null) {
n897=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] %copName is out of the game! You are now the new Cop! You can no longer "!inspect" but now you can "!follow <username>" without the <>.
n898=    set %kotori %hanayo
n899=    set %copName Hanayo
n900=    unset %hanayo
n901=  }
n902=  else {
n903=    unset %kotori
n904=  }
n905=}
n906=
n907=// alias to check if Idol team won
n908=alias checkEndGameIdol {
n909=  if (%eli != $null) {
n910=    if (%voteYes != $null) {
n911=      if (%voteYes >= 1) {
n912=        timer 1 2 night
n913=      }
n914=    }
n915=    else {
n916=      dayVoting
n917=    }
n918=  }
n919=  else {
n920=    endGameIdol
n921=  }
n922=}
n923=
n924=
n925=// alias to end game and declare Idol Team the winners
n926=alias endGameIdol {
n927=  scid -at1 timer 1 3 msg %mafiaChannel [Idol Mafia] The game is over! Team Idol wins! The winners are: %mafiaPlayers
n928=  resetValues
n929=}
n930=
n931=// alias for current players
n932=alias currentPlayers {
n933=  scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] The current players are: %mafiaPlayers
n934=  if (%mafiaPlayersMoved != $null) {
n935=    scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] Currently waiting for %mafiaPlayersMoved to make a move.
n936=  }
n937=  else if (%honoka == $null) {
n938=  }
n939=  else if (%dayvoting) {
n940=    scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] Currently waiting for Honoka to elect.
n941=  }
n942=  else if (%honokaVote) {
n943=    scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w $1 [Idol Mafia] Currently waiting for %mafiaPlayersVoted to vote.
n944=  }
n945=}
n946=
n947=// alias for Honoka
n948=alias mafiaHonoka {
n949=  if (%dayVoting == $true) {
n950=    if ($1 == !elect) {
n951=      if ($2 == %honoka) {
n952=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %honoka [Idol Mafia] You're too lazy to elect yourself! Pick someone else!
n953=      }
n954=      else if ($istok(%mafiaPlayers, $2, 44)) {
n955=        set %honokaDecision $2
n956=        set %dayVoting $false
n957=        set %voteOn $true
n958=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %honoka [Idol Mafia] You chose to elect $2 for the daily homework.
n959=        if (%nicoHonoka) {
n960=          set %honokaDecision %nicoNi2
n961=          set %nicoHonoka $false
n962=          scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %honoka [Idol Mafia] But Nico seduced you into electing %nicoNi2 instead!
n963=        }
n964=        scid -at1 timer 1 2 msg %mafiaChannel [Idol Mafia] Honoka has elected $2 for the daily homework. Type "!vote yes" or "!vote no" in the channel. You cannot change your vote, so pick wisely! $2 can persuade you in the meantime.
n965=      }
n966=      else {
n967=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %honoka [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n968=      }
n969=    }
n970=    else {
n971=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %honoka [Idol Mafia] Invalid command. Your command is "!elect <username>" without the <>.
n972=    }
n973=  }
n974=}
n975=
n976=// alias to remove name from mafiaPlayersMoved
n977=alias mafiaPlayersMoved {
n978=  if ($istok(%mafiaPlayersMoved, $1, 44)) {
n979=    %mafiaPlayersMoved = $remtok(%mafiaPlayersMoved, $1, 44)
n980=  }
n981=}
n982=
n983=
n984=// alias for Rin
n985=alias mafiaRin {
n986=  if (%nightAction == $true) {
n987=    if ($1 == !nyaavigate) {
n988=      if (%rinAction) {
n989=        set %rinNyaavigate $true
n990=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] You decide to use your one !nyaavigate for the game! If you change your mind, whisper to me "!idle".
n991=        mafiaPlayersMoved %rin
n992=        checkAllDone
n993=      }
n994=      else {
n995=        msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] You have already used your !nyaavigate this game!
n996=      }
n997=    }
n998=    else if ($1 == !idle) {
n999=      set %rinNyaavigate $false
n1000=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] You choose to do nothing tonight.
n1001=      mafiaPlayersMoved %rin
n1002=      checkAllDone
n1003=    }
n1004=    else {
n1005=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] Invalid command. Your command is "!nyaavigate" or "!idle".
n1006=    }
n1007=  }
n1008=  else {
n1009=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %rin [Idol Mafia] It is currently not night time.
n1010=  }
n1011=}
n1012=
n1013=// alias for Kotori
n1014=alias mafiaKotori {
n1015=  if (%nightAction == $true) {
n1016=    if ($1 == !follow) {
n1017=      if ($2 == %kotori) {
n1018=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] You can't follow yourself! Pick someone else!
n1019=      }
n1020=      else if ($istok(%mafiaPlayers, $2, 44)) {
n1021=        set %kotoriFollow $2
n1022=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] You choose to follow $2 tonight. If you change your mind, whisper to me your new target.
n1023=        mafiaPlayersMoved %kotori
n1024=        checkAllDone
n1025=      }
n1026=      else {
n1027=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n1028=      }
n1029=    }
n1030=    else {
n1031=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] Invalid command. Your command is "!follow <username>" without the <>.
n1032=    }
n1033=  }
n1034=  else {
n1035=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %kotori [Idol Mafia] It is currently not night time.
n1036=  }
n1037=}
n1038=
n1039=// alias for Eli
n1040=alias mafiaEli {
n1041=  if (%nightAction == $true) {
n1042=    if ($1 == !assign) {
n1043=      if ($2 == %eli) {
n1044=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] You can't assign yourself homework! Pick someone else!
n1045=      }
n1046=      else if ($istok(%mafiaPlayers, $2, 44)) {
n1047=        set %eliAssign $2
n1048=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] You choose to assign $2 homework tonight. If you change your mind, whisper to me your new target.
n1049=        mafiaPlayersMoved %eli
n1050=        checkAllDone
n1051=      }
n1052=      else {
n1053=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n1054=      }
n1055=    }
n1056=    else if ($1 == !idle) {
n1057=      set %eliAssign Idle
n1058=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] You feel generous tonight and assign nobody homework. If you change your mind, whisper to me your new target.
n1059=      mafiaPlayersMoved %eli
n1060=      checkAllDone
n1061=    }
n1062=    else {
n1063=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] Invalid command. Your command is "!assign <username>" without the <> or "!idle" if you don't want to assign any homework tonight.
n1064=    }
n1065=  }
n1066=  else {
n1067=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %eli [Idol Mafia] It is currently not night time.
n1068=  }
n1069=}
n1070=
n1071=// alias for Maki
n1072=alias mafiaMaki {
n1073=  if (%nightAction == $true) {
n1074=    if ($1 == !help) {
n1075=      if ($2 == %maki) {
n1076=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] You're a genius, but you can't tutor yourself. Pick someone else!
n1077=      }
n1078=      else if ($istok(%mafiaPlayers, $2, 44)) {
n1079=        set %makiHelp $2
n1080=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] You choose to help $2 with their homework tonight. If you change your mind, whisper to me your new target.
n1081=        mafiaPlayersMoved %maki
n1082=        checkAllDone
n1083=      }
n1084=      else {
n1085=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n1086=      }
n1087=    }
n1088=    else {
n1089=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] Invalid command. Your command is "!help <username>" without the <>.
n1090=    }
n1091=  }
n1092=  else {
n1093=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %maki [Idol Mafia] It is currently not night time.
n1094=  }
n1095=}
n1096=
n1097=// alias for Umi
n1098=alias mafiaUmi {
n1099=  if (%nightAction == $true) {
n1100=    if ($1 == !shoot) {
n1101=      if (%umiAction) {
n1102=        if ($2 == %umi) {
n1103=          scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] You can't shoot yourself! Pick someone else!
n1104=        }
n1105=        else {
n1106=          if ($istok(%mafiaPlayers, $2, 44)) {
n1107=            set %umiShoot $2
n1108=            scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] You decide to use your one !shoot for the game! If you change your mind, whisper to me "!idle".
n1109=            mafiaPlayersMoved %umi
n1110=            checkAllDone
n1111=          }
n1112=          else {
n1113=            scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n1114=          }
n1115=        }
n1116=      }
n1117=      else {
n1118=        msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] You have already used your !shoot this game!
n1119=      }
n1120=    }
n1121=    else if ($1 == !idle) {
n1122=      unset %umiShoot
n1123=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] You choose to do nothing tonight.
n1124=      mafiaPlayersMoved %umi
n1125=      checkAllDone
n1126=    }
n1127=    else {
n1128=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] Invalid command. Your command is "!shoot <username>" without the <>, or "!idle".
n1129=    }
n1130=  }
n1131=  else {
n1132=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %umi [Idol Mafia] It is currently not night time.
n1133=  }
n1134=}
n1135=
n1136=// alias for Hanayo
n1137=alias mafiaHanayo {
n1138=  if (%nightAction == $true) {
n1139=    if ($1 == !inspect) {
n1140=      if ($2 == %hanayo) {
n1141=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] You can't inspect yourself! Pick someone else!
n1142=      }
n1143=      else if ($istok(%mafiaPlayers, $2, 44)) {
n1144=        set %hanayoInspect $2
n1145=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] You choose to inspect $2 tonight. If you change your mind, whisper to me your new target.
n1146=        mafiaPlayersMoved %hanayo
n1147=        checkAllDone 
n1148=      }
n1149=      else {
n1150=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n1151=      }
n1152=    }
n1153=    else {
n1154=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] Invalid command. Your command is "!inspect <username>" without the <>.
n1155=    }
n1156=  }
n1157=  else {
n1158=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %hanayo [Idol Mafia] It is currently not night time.
n1159=  }
n1160=}
n1161=
n1162=// alias for Nico
n1163=alias mafiaNico {
n1164=  if (%nightAction == $true) {
n1165=    if ($1 == !niconi) {
n1166=      if (%nicoAction) {
n1167=        if ($2 == %nico) {
n1168=          scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] You can't pick yourself for <username>. Pick someone else!
n1169=        }
n1170=        else if ($2 == $3) {
n1171=          scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] You can't pick the same player for <username> and <target>!
n1172=        }
n1173=        else if (($istok(%mafiaPlayers, $2, 44)) && (($istok(%mafiaPlayers, $3, 44)))) {
n1174=          set %nicoNi1 $2
n1175=          set %nicoNi2 $3
n1176=          scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] You decide to use your one !niconi for the game! If you change your mind, whisper to me "!idle".
n1177=          scid -at1 timer 1 2 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] You will Nico Ni $2 and force them to use their action on $3 $+ !
n1178=          mafiaPlayersMoved %nico
n1179=          checkAllDone
n1180=        }
n1181=        else {
n1182=          msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] You have already used your !niconi this game!
n1183=        }
n1184=      }
n1185=      else if ($1 == !idle) {
n1186=        set %nicoNi1 Idle1
n1187=        set %nicoNi2 Idle2
n1188=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] You choose to do nothing tonight.
n1189=        mafiaPlayersMoved %nico
n1190=        checkAllDone
n1191=      }
n1192=      else {
n1193=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] Invalid command. Your command is "!niconi <username> <target>" without the <>, or "!idle".
n1194=      }
n1195=    }
n1196=    else {
n1197=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nico [Idol Mafia] It is currently not night time.
n1198=    }
n1199=  }
n1200=}
n1201=
n1202=// alias for Nozomi
n1203=alias mafiaNozomi {
n1204=  if (%nightAction == $true) {
n1205=    if ($1 == !washi) {
n1206=      if ($2 == %nozomi) {
n1207=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] You can Washi Washi yourself on your own time, but for now pick someone else ;)
n1208=      }
n1209=      else if ($istok(%mafiaPlayers, $2, 44)) {
n1210=        set %nozomiWashi $2
n1211=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] You choose to Washi Washi $2 tonight. If you change your mind, whisper to me your new target.
n1212=        mafiaPlayersMoved %nozomi
n1213=        checkAllDone
n1214=      }
n1215=      else {
n1216=        scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] $2 is not in the current game. You can check who is currently in the game by whispering to me "!currentplayers".
n1217=      }
n1218=    }
n1219=    else {
n1220=      scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] Invalid command. Your command is "!washi <username>" without the <>.
n1221=    }
n1222=  }
n1223=  else {
n1224=    scid -at1 timer 1 1 msg #_whitericebot_1448174506973 .w %nozomi [Idol Mafia] It is currently not night time.
n1225=  }
n1226=}
